<!DOCTYPE HTML>
<html>

<head>
    <link rel="stylesheet" href="/css/style.css" />
</head>

<body onload="init();">
    <p>
        Les dimensions de la carte doivent correspondre aux dimensions de la carte du robot :
        <div id="dim"></div>
    </p>
    <div id="map" style="float: right">
        <canvas id="canvasMap" width="200" height="200" style="
                                background:  no-repeat;
                                background-image:url('/images/Map.png');
                                background-position-x:0px;
                                background-position-y:0px;
                                "></canvas>
    </div>
   
    <button onclick="getDataMap();">Click me</button>
    <script>
    var type = "pilote-appelant";
    var otherType = "pilote-appelé";
    </script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/settings.js"></script>
    <script src='/js/mapviewer.js'></script>
    <script src='/js/ws_manager.js'></script>
    <script src='/js/commands.js'></script>
    <script src='/js/main.js'></script>
    <script>
    function init() {

        $.get("http://192.168.173.1:8080/?url=http://127.0.0.1:50000/nav/maps/parameters", function(dataMap) {
            console.log('lalala',dataMap);
            if(!dataMap)
                return "pas de données ! :/ " ; 

          //  mapInfo = JSON.parse(dataMap);
            //get the map width and height to adjust the canvas
            $('#canvasMap').attr("width", dataMap.Width);
            $('#canvasMap').attr("height", dataMap.Height);

            console.log("Dimension Width : " + dataMap.Width + ",  Height : " + dataMap.Height);
console.log('lalala 2 ');
            if (document.getElementById("dim")) {
                //text info
                var text = "height : " + dataMap.Height + "px  width : " + dataMap.Width + "px";
                document.getElementById("dim").innerHTML = text;
                console.log('lalala 3 ');
            }
        });
    }
    </script>
</body>

</html>
