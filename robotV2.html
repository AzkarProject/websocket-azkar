<html>
<head>

	
</head>

    <head>
    <meta charset="utf-8" />
    <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
    <meta name='description' content='WebRTC benchmarks base for AZKAR project' />
    <!-- viewport sert a controler la mise en page sur les appareils mobiles -->
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
    <link rel="stylesheet" href="/css/style.css" />
    <script src='/js/lib/jquery-1.11.3.min.js'></script>
    <!--
    <link rel="import" href="/web_kom-remote/kom-remote.html">
    -->
	<title>1to1-Robot</title>
    </head>


<!--<body class="ihmRobot">-->
<body class="ihmRobotV2" style="background-color:#000000 ">

    <!--
    <strong><span id="zone_info_server">WebRTC AZKAR</span></strong>
    <hr/>
    -->

	<script type="text/javascript">
		
		var remoteCam = "embed";
		var localCam = "embed";
		var underCams = "embed"
		


		function toggleElementFullScreen(toggleElementFullScreen) {
			var style = null;
			if (remoteCameraView == 'full') {
	            ihm.toggleModules('show');
	            style = '';
				$('#1to1_remoteVideo').attr('style',style);
	            remoteCameraView = "embed";
	    	} else {
	            ihm.toggleModules('hide');
	            style = 'position:fixed;top:0;right:0;bottom:0;left:0;height:100%;width:100%;'
			 	$('#1to1_remoteVideo').attr('style',style);
	            remoteCameraView = "full";
		    } 
		}

	
	</script>	





	<section id="viewportRobot">

			<div style="width:99%; height:585px; background-color:#000000 ; padding:5px" >
			
							<div id="remoteCam" style="height:325px;border:1px solid #ccc;border-radius: 10px;margin: 5px 10px 0px 0px">
			                		
			                		<video 	id='1to1_remoteVideo' 
			                				width="100%" height="90%" 
			                				style="background-color:black; margin: 0 auto;" 
			                				autoplay controls="controls">
			                		</video>
					  	 	
					  	 	</div>

					  	 	<br/>

					  	 	<div id="underCams" style="background-color:black; width:980px; margin: 0 auto;">
									
								

								<div id="navButtons" style="background-color:black; margin:5px; text-align:center; float:left;">
	                                
	                                <button id="zoomIn" onclick="zoomCarto('In')">Zoom +</button>
	                                <button id="zoomOut" onclick="zoomCarto('Out')">Zoom -</button>
									&nbsp;&nbsp;
	                                <button id="translateLeft" onclick="translationMap('Left')">Left</button>
	                                <button id="translateUp" onclick="translationMap('Up')">Up</button>
	                                <button id="translateDown" onclick="translationMap('Down')">Down</button>
	                                <button id="translateRight" onclick="translationMap('Right')">Right</button>
									&nbsp;&nbsp;
	                                <button id="resetMap" onclick="resetMap()">Reset Map</button>
									&nbsp;&nbsp; 
	                                <button id="trackingMode" onclick="trakingMode()">Tracking</button>
	                              	<br/><br/>
	                             	<canvas id="myCanvas" width="650" height="190" style="border:1px solid #ccc; margin: 0 auto;background-color: black; border-radius: 10px;"></canvas>
	                             
	                             </div>


	                             <div id="localCam" style="float:right">
			                		<video id='1to1_localVideo' 
			                				width="300" height="230" 
			                				style="background-color: black;border:1px solid #ccc; border-radius: 10px;margin:5px;" 
			                				autoplay muted controls="controls"">
			                		 </video>
					  	 		
					  	 		</div>

                            
					  	 	</div>

					  	 	<div id="buttons">

					  	 	</div>

			</div>




	</section>

	<section id="old1to1_toHide" style="float:left;display: none;">			
	
		<section id="bloc_1toN" class="" style="float:left>
				

				<div  class="floatLeft oneQuarterContainerBox">
					<!--
					<div id="piloteCam" class="insideFlex pilote shadowBlack">
					    <strong> Pilot Camera</strong>
					    <hr/>
					    <div class = "videosContainer">
					    	<video id='1to1_remoteVideo' class="" autoplay controls="controls"></video>
					    </div>
			  	 	</div>
			  	 	-->
				</div>
			

				<div  class="floatLeft oneQuarterContainerBox">
					<!--
					<div id="robotCam" class="insideFlex robot shadowBlack">
					    <strong> Robot Camera</strong>
					    <hr/>
					    <div class = "videosContainer">
	                		<video id='1to1_localVideo' autoplay muted controls="controls"></video>
	                	</div>
			  	 	</div>
			  	 	-->
				</div>


				<div  class="floatLeft doubleQuarterContainerBox" style="width:650px;">
					<div id="remoteCanvasArea" class="insideFlex robot shadowBlack">
			            
						<div>
			            	<strong> Navigation</strong>
			            	<hr/>
						
						
							<div style="float:left; width:200px">
							  	<span id="pointOfinterestTitle"> Points of interest</span>							
								<br/>

								<h3><span id="robotStatusMessage"><span></h3>


							</div>
							
							<div style="height:135px;">
								<canvas id="myCanvas" width="400" height="130" style="border:1px solid #ccc;"></canvas>
							</div>
						
						</div>
		        	</div>
	        	
	        	</div>

		</section>


		<section id="bloc_battery" class="" style="float:left">

				<div class="floatLeft oneQuarterContainerBox" style="width:650px">
										
					<div class="jauge insideFlex robot shadowBlack">
		           		<label for="battery_level">Battery Level:</label>
		            	<progress id="battery_level" class="floatRight" max="100" style="width:530px"></progress>
		        	</div>
		      	
		</div>


		
		

		</section>

		<section id="bloc_1to1_messages" class="" style="float:left;width:1300px">
					
				<div id="websocketChat" class="insideFlex robot shadowBlack floatLeft doubleQuarterBox" style="width:628px">  
					
				    <form action="/" method="post" id="formulaire_chat_websoket" style="text-align:center" >
				        <strong>Websocket Chat & Logs&nbsp;</strong>
			            <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
			            <button id="env_msg_ws" type="submit" >Envoyer</button>
			        </form>
			        <hr class="hrForm">
				 	<textarea class="input" style="width:100%" id="zone_chat_websocket" readonly="readonly" placeholder="Once upon a time..."></textarea>
					<!--
					<hr class="hrForm">
					<form id="text-options1" style="text-align:center">
	            		<label>Filename: <input type="text1" class="filename" id="text-filename1" placeholder="Robot_WS_LOGS"/>.txt</label>
	            		<button id="saveLogs_webSocket" type="submit" value="Save"/>Save</button>
	        		</form>
	        		-->
				</div>

	     </section>




			<section id="bloc_1to1_Devices" class="" style="float:left;width:1300px">
			

				<div class="floatLeft oneQuarterContainerBox">
				
					<div id="selectionMicros" class="insideFlex robot shadowBlack"> 
					  	<span id="messageDevicesStateMicro"> Micros disponibles</span>
						<hr/>
						<div class="select">
							<select id="local_audioSource"></select>
						</div>
					</div>	
				</div>

				<div class="floatLeft oneQuarterContainerBox">
				
					<div id="selectionCams" class="insideFlex robot shadowBlack"> 
					  	<span id="messageDevicesStateCams"> Caméras disponibles</span>
						<hr/>
						<div class="select">
						   	<select id="local_videoSource"></select>
						</div>
					</div>	
				</div>

			</section>

	     <section id="bloc_1to1_messages2" class="" style="float:left;width:1300px">

	      		<div id="dataChannelArea" class="insideFlex robot shadowBlack floatLeft doubleQuarterBox" style="width:628px">  
				        
				   <div id="formulaire_chat_webRTC" class="pseudoForm" style="text-align:center">
				        <strong>WebRTC Chat & Logs&nbsp;</strong>
			            <input type="text" name="message" id="input_chat_WebRTC" disabled placeholder="Waiting open channel..." size="28" autofocus />
			            <button id="env_msg_WebRTC" disabled onclick="sendMessage()">Envoyer</button>
				   </div>
				    <hr class="hrForm">
					<textarea class="input" id="zone_chat_WebRTC" readonly="readonly" style="width:100%" placeholder="Once upon a time..."></textarea>
					<!--
					<hr class="hrForm">
					<form id="text-options2" style="text-align:center">
		            	<label>Filename: <input type="text" class="filename" id="text-filename2" placeholder="Robot_webRTC_LOGS"/>.txt</label>
		            	<button id="saveLogs_webRTC" type="submit" value="Save"/>Save</button>
		        	</form>
		      		-->

		      	</div>
		</section>		

		<!--
		<section id="bloc_1to1_commands" class="" style="float:left;width:1300px">

			<div  class="floatLeft oneQuarterContainerBox">
						<div id="Command_PAD" class="insideFlex robot shadowBlack">
							<kom-remote class="kom-remote"></kom-remote>
			  	 	</div>
				</div>
		</section>
		-->
	</section>

	<section id="TopNotification">
                       
            <div id='infoMessage' class="info message">
            </div>

            <div id='errorMessage' class="error message">
            </div>

            <div id='warningMessage' class="warning message">
            </div>

            <div id='sucessMessage' class="success message">
            </div>

            <div id='standardMessage' class="standard message">
            </div>

    </section>
		

       	<script>	  	 
		var type = "robot-appelé";
		
		// On initialise les flages du mode simulateur
		var fakeRobubox = null;
		var loopBattery = null;

		</script>

 
        <script src="/socket.io/socket.io.js"></script>
        <script src='/js/lib/adapter.js'></script>
		<script src="/js/lib/FileSaver.js"></script>
    	<script src="/js/lib/autobahn.min.jgz"></script>
        
		
		<script src="/js/common_tools.js"></script>
		<script src="/js/common_models.js"></script>
        <script src="/js/common_app_settings.js"></script>
	    <script src='/js/1to1_01_websocket.js'></script>
	    
		
		<script src='/js/module_ihm.js'></script>
		
		<script src='/js/module_fake_robubox.js'></script>
        
        <script src='/js/module_navigation_interface.js'></script>
        
        <script src='/js/module_notifications.js'></script>
		
        <script src='/js/module_komcom.js'></script>
		
		<!--
		<script src='/js/module_komremote.js'></script>
		-->
		
		
		<script src='/js/module_carto.js'></script>
		
		<script src='/js/module_navigation.js'></script>
		
		<script src='/js/module_userconnection.js'></script>
		<script src="/js/module_logs.js"></script>
		
		
	    <script src='/js/1to1_02_pre_signaling.js'></script>
	    <script src='/js/1to1_03_signaling.js'></script>
	    <script src='/js/1to1_04_post_signaling.js'></script>




		<script>                    
			
			
			function zoomCarto(inOut) {
			    var delta = 1;
			    var reset = null;
			    if (inOut == 'Out') delta = 1
			    else if (inOut == "In") delta = -1; 
			    carto.setZoom(delta);
			}

			// Boutons directionnels (up,down,left,right)
			function translationMap(direction) {
			    var moveX = 0;
			    var moveY = 0;
			    if (direction == "Up") moveY = -1;
			    else if (direction == "Down") moveY = 1;
			    else if (direction == "Right") moveX = 1;
			    else if (direction == "Left") moveX = -1;
			    carto.canvasMove(moveX,moveY);
			}

			// Remise à zero de l'affichage cartographique (R.A.Z)
			function resetMap() {
			    carto.resetCanvas();
			}

			// Activation du tracking Mode
			// > Désactivation par resetMap...
			function trakingMode() {
			    carto.activeTracking();
			}




			// Affichage de l'entête
			ihm.getHeaderPage(pseudo);

			// On lance l'utilitaire de récupération de la batterie sur le robot
			komcom.getBattery();
			/**/
		
		</script>

</body>
</html>