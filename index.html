<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
		<meta name='description' content='WebRTC benchmarks base for AZKAR project' />
		<!-- viewport sert a controler la mise en page sur les appareils mobiles -->
		<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
		<link rel="stylesheet" href="/css/style.css" />
        <title>WebRTC AZKAR</title>
    </head>
 
    <body>

    
        
        <h3>AZKAR WebRTC script Base</h3>
        <info> (socket.io/websockets) - V.0.0.1</info>
        <hr/>
	

	<ul class="flex-container wrap">
              

	    <section id="myvideos" class="sectionOneVideo">
		    <li class="flex-item myvideo">
			    <strong> WebRTC localVideo Test </strong>
				<hr/>
			    <div id="infoIceCandidateSended">???</div>
			    <video id='localVideo' autoplay muted controls="controls"></video>
			</li>
	    </section>
	    
	     <section class="yourvideos" class="sectionMultipleVideos">
		    <li class="flex-item yourvideo">
			    <strong> WebRTC remoteVideo Test </strong>
				<hr/>
			    <div id="infoIceCandidateReceived">???</div>
			    <video id='remoteVideo' autoplay muted controls="controls" ></video>
	  	 	</li>
	  	 </section>

		
		<section id="chat">
		  
			<li class="flex-item">
				
				<div id='textareas'>
					<strong> WebRTC dataChannel Test </strong>
					<hr/>
					<button id="sendButton" disabled>WebRTC dataChannel Send</button>
					<br/>
					<textarea id="dataChannelSend" disabled placeholder="Write datas to send..."></textarea>
					<hr/> 
					<textarea id="dataChannelReceive" disabled placeholder="Waiting WebRTC datas..."></textarea>
				</div>
		
	  		</li>
	  	
	  	</section>


		<section id="websocket_chat">
			 <li class="flex-item myvideo">
		        
				<strong> Websocket Chat Test </strong>
				<hr/>
		        <form action="/" method="post" id="formulaire_chat">
		            <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
		            <input type="submit" id="envoi_message" value="Envoyer" />
		        </form>
	       	 	<hr/>
			 	<div id="zone_chat"></div>

	       	 </li>
        </section>




        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/common.js"></script>
        <script src="/js/main.js"></script>
        <script>
        /*
            var socket = io.connect();

            // On demande le pseudo, on l'envoie au serveur et on l'affiche dans le titre
            var pseudo = prompt('Quel est votre pseudo ?');
            socket.emit('nouveau_client', pseudo);
            document.title = pseudo + ' - ' + document.title;

            // Quand on reçoit un message, on l'insère dans la page
            socket.on('message', function(data) {
                insereMessage(data.pseudo, data.message)

            })

            // Quand un nouveau client se connecte, on affiche l'information
            socket.on('nouveau_client', function(pseudo) {
                $('#zone_chat').prepend('<p><em>' + pseudo + ' a rejoint le Chat !</em></p>');
            })

           
            // titi : pour contrôle hosting
            // Affichage des variables d'environnement serveur ds la partie cliente
            // Todo: n'afficher q'une foi par client...
            // par exemple, une balise dédiée a cet affichage
            // si elle est vide, on la rempli
            // Si elle est déjà remplie, on ne fait rien...
            // Et comme ca on peut alléger les messages de la console
            socket.on('infoServer', function(data) {
            	console.log(" !!! > " + data);
            })
            /**/



            // ----------------------------------------------------------------------------------
            /*// ----------- Méthodes jquery d'affichage du tchat

            // Lorsqu'on envoie le formulaire, on transmet le message et on l'affiche sur la page
            $('#formulaire_chat').submit(function () {
                var message = $('#message').val();
                socket.emit('message', message); // Transmet le message aux autres
                insereMessage(pseudo, message); // Affiche le message aussi sur notre page
                $('#message').val('').focus(); // Vide la zone de Chat et remet le focus dessus
                return false; // Permet de bloquer l'envoi "classique" du formulaire
            });
            
            // Ajoute un message dans la page
            function insereMessage(pseudo, message) {
                $('#zone_chat').prepend('<p><strong>' + pseudo + '</strong> ' + message + '</p>');
                console.log ((pseudo + " >> " + message));
            }

            // --------- / Méthodes Jquery ---------------------------------------------
        	/**/
        </script>
    
	</ul>


    </body>
</html>