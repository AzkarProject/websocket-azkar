<html>
<head>

	
</head>

    <head>
        <meta charset="utf-8" />
        <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
		<meta name='description' content='WebRTC benchmarks base for AZKAR project' />
		<!-- viewport sert a controler la mise en page sur les appareils mobiles -->
		<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
		<link rel="stylesheet" href="/css/style.css" />
        <title>1to1-Index</title>
    </head>


<body>

    <strong><info id="zone_info_server"></info></strong>
    <hr/>
    <h1>1to1-Index</h1>
    <p><a href="/robot/"> >>> Robot</a></p>
    <p><a href="/pilote/"> >>> Pilote</a></p>

  
    
    <span id="openConnection">
        <button class="shadowBlack" id="index_RazConnexion" onclick="razConnexions()">
           Déconnexion de tous les clients
        </button>
 	  </span>
  <br/>
  <br/>
    <span id="reloadAllClients">
        <button class="shadowBlack" id="index_RazConnexion" onclick="reloadClients()">
          Reload des connexions clients (si connectés)
        </button>
    </span>

      <section id="TopNotification">
                       
            <div id='infoMessage' class="info message">
            </div>

            <div id='errorMessage' class="error message">
            </div>

            <div id='warningMessage' class="warning message">
            </div>

            <div id='sucessMessage' class="success message">
            </div>

            <div id='standardMessage' class="standard message">
            </div>

    </section>

    <script>
    var type = null;
    </script>

    <script src='/js/lib/jquery-1.10.1.min.js'></script>
    <script src="/js/common_app_settings.js"></script>
	  <script src="/js/common_tools.js"></script>


	  <script src="/socket.io/socket.io.js"></script>
    <script src='/js/module_notifications.js'></script>
    <!--
    <script src='/js/main_websocket.js'></script>
    -->


	<script>                    
            

		// Initialisation du canal de signalisation
		var socket = io.connect(); 

			function razConnexions() {
				socket.emit('razConnexions',""); // Ordonne au serveur de virer tous les connectés
        notifications.writeMessage ("warning","déconnexion des clients en cours !","",3500)
        setTimeout(function(){
            notifications.writeMessage ("success","Clients déconnectés !","",3000)
        }
        , 3500); 
       
				//alert ("Clients réinitialisés !");
			}

      function reloadClients() {
        socket.emit('reloadAllClients',""); // Ordonne au serveur de virer tous les connectés
        notifications.writeMessage ("warning","Reload des connexions clients en cours !","",3500)
        setTimeout(function(){
            notifications.writeMessage ("success","Reload terminé !","",3000)
        }
        , 3500); 
      }
      
      // On récupère depuis nodejs le nom de la machine serveur
      // en passant par de l'AJAX plutôt que par websocket....
      $.get( "/getvar", function( data ) {
        hostName = data.hostName;
        infoServerTxt = "<i>"+appSettings.appName()+": ";
        infoServerTxt += appSettings.appBranch()+" - ";
        infoServerTxt += " Version " + appSettings.appVersion();
        infoServerTxt += " (Serveur: "+hostName+") </i>";
        var infoCredit = " <br/> " + appSettings.appCredit();
        if (hostName != "???" ) $('#zone_info_server').replaceWith(infoServerTxt+infoCredit);
      });


    
    </script>	

</body>
</html>