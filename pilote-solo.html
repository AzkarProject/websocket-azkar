<html>

<head>
</head>

<head>
    <meta charset="utf-8" />
    <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
    <meta name='description' content='WebRTC benchmarks base for AZKAR project' />
    <!-- viewport sert a controler la mise en page sur les appareils mobiles -->
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
    <link rel="stylesheet" href="/css/style.css" />
    <script src='/js/lib/jquery-1.11.3.min.js'></script>
    <link rel="import" href="/web_kom-remote/kom-remote.html">
    <title>AZKAR 1to1</title>
</head>



<body class="ihmPilote">
    
    <strong><span id="zone_info_server">WebRTC AZKAR</span></strong>
    <hr/>
    
 <!--    <section id="serverDate" class="" style="float:left;width:100%">    
        
        Différence horloge Client/Serveur: <span id="difference"></span><BR/>
        <script src="/js/lib/ServerDate.js"></script>
      
       
       <SCRIPT>
            // Display two real time clocks, the server's and the client's, and show the
            // difference between them in milliseconds.
            function updateClocks()
            {
                var client = new Date();

                // document.getElementById("server").innerHTML = String(ServerDate);
                // document.getElementById("client").innerHTML = String(client);

                document.getElementById("difference").innerHTML = (ServerDate - client)
                    + " &plusmn; " + ServerDate.getPrecision() + " ms";
            }

            // Display the clocks and update them every second.
            updateClocks();
            setInterval(updateClocks, 1000);
        

            // You may then use ServerDate as you would use the Date object or one of its instances, e.g.:
            // > ServerDate()
            // "Mon Aug 13 2012 20:26:34 GMT-0300 (ART)"
            // > ServerDate.now()
            // 1344900478753
            // > ServerDate.getMilliseconds()
            // 22
            // There is also a new method to get the precision of ServerDate's estimate of the server's clock (in milliseconds):
            // > ServerDate.toLocaleString() + " ± " + ServerDate.getPrecision() + " ms"
            // "Tue Aug 14 01:01:49 2012 ± 108 ms"

        </SCRIPT>



    </section> -->



    <section id="controlArea" class="fullSizeContainerBox">

        <div id="colGaucheUpControlArea" class="floatLeft oneQuarterContainerBox">
            
            <div id="robotDevices" class="insideFlex oneQuarterbox robot shadowBlack device">
                <strong>Robot Devices</strong>
                <hr/>
                <div class="select">
                    <label for="remote_audioSource">Audio: </label>
                    <select id="remote_audioSource"></select>
                </div>
                <div class="select">
                    <label for="remote_videoSource">Video: </label>
                    <select id="remote_videoSource"></select>
                </div>
                <hr/>
                <button id="remote_ButtonDevices" onclick="remoteManageDevices()">Sélectionner</button>
            </div>


            <div id="piloteDevices" class="insideFlex oneQuarterbox pilote shadowBlack device">
                <strong> Pilote Devices</strong>
                <hr/>
                <div class = "videosContainer">
                    <video id='1to1_localVideo' autoplay muted controls="controls"></video>
                </div>
                <hr/>
                <div class="select">
                    <label for="local_audioSource">Audio: </label>
                    <select id="local_audioSource"></select>
                </div>
                <div class="select">
                    <label for="local_videoSource">Video: </label>
                    <select id="local_videoSource"></select>
                </div>
            </div>


            <div id="1to1_master_connection" class="insideFlex oneQuarterbox robot shadowBlack device">

                <span id="openConnection">
                    <button class="shadowBlack" id="local_ButtonDevices" onclick="localManageDevices()">
                        Ouvrir la connexion
                    </button>
                <span id="closeConnection"></span>

            </div>
        </div>

        <div id="colDroiteUpControlArea" class="floatRight tripleQuarterBox" style="height:440px;width:960px">
            
            <div id="remoteVideoArea" class="insideFlex robot tripleQuarterBox shadowBlack floatRight" style="height:415px; width:600px;min-width:600px">
                <strong> Robot Camera View</strong>
                <hr/>
                <div class = "videosContainer" style="height:300px; width:300px;min-width:300px">
                    <video id='1to1_remoteVideo' class="" autoplay muted controls="controls" style="height:380px; width:600px;min-width:600px"></video>
                    <!--<video id='1to1_remoteVideo' class="" autoplay muted controls="controls"></video>-->
                </div>
            </div>
        

            <div id="robotCommands" class="insideFlex oneQuarterbox robot shadowBlack device" style="height:333px">
                <strong>Robot controls</strong> <span id="connect-notice"></span>
                <hr/>

                
                <span id="systemSetting" style="text-align:center;">
                System: 
                    <input type="radio" name="controlSystem" value="Robubox" id="Robubox" onclick="setNavSystem('Robubox')" checked /> <label for="Robubox">Robubox</label>
                    <input type="radio" name="controlSystem" value="KomNAV" id="KomNAV" onclick="setNavSystem('KomNAV')"/> <label for="KomNAV">KomNAV</label>
                </span>
                <br/>
                <span id="dataChannelSetting" style="text-align:center;">
                Channel: 
                    <input type="radio" name="controlChannel" value="webSocket" id="webSocket" onclick="setNavChannel('webSocket')" checked /> <label for="webSocket">webSocket</label>
                    <input type="radio" name="controlChannel" value="webRTC" id="webRTC" onclick="setNavChannel('webRTC')"/> <label for="webRTC">webRTC</label>
                    
                </span>
                <hr/>

                <div id="step-commands">                   
                    <kom-remote class="kom-remote"></kom-remote>
                </div>

                <!--<div id="drive-commands" style="display:none; overflow: scroll; height:150px">-->
                <div id="drive-commands" style="display:none; text-align:center; height:150px">    
                    
                    <b>Direction</b><br/>
                    <progress id="leftRight" value=1 max=2></progress><br><br/>

                    <b>Speed</b><br/>
                     Avance:<br/><progress  id="advanceValue" value=0 min=0 max=1></progress>
                     <br/>
                     Reverse:<br/><progress id="reverseValue" value=0 min=0 max=1></progress>
                    <br/>
                    <br/>
                    <b>Commande</b><br/>
                    <div id="buttonStatus"></div>
                   
                </div>
            
            </div> <!-- id="robotCommands" -->


            <!--<div id="robotInfos" class="insideFlex robot oneThirdBox shadowBlack device floatLeft" style="height:60px;width:316px;min-width:316px">-->
            <div id="robotInfos" class="insideFlex robot oneQuarterbox shadowBlack device floatLeft" style="height:60px">
                <strong> Robot Informations</strong>
                <hr/>
                <div class="jauge" style="width:300px; text-align:center;">
                    <label for="battery_level">Battery Level:</label>
                    <progress id="battery_level" max="100" style="width:100px"></progress>
                </div>
            </div>
        </div>

   
    </section>

   

    <section id="controlArea2" class="fullSizeContainerBox">

        <div id="colGaucheUpControlArea" class="floatLeft oneQuarterContainerBox">
            
            <div id="websocketChat" class="insideFlex pilote oneQuarterbox shadowBlack floatLeft" style="height:200px">
                <strong> Websocket Messages & Chat</strong>
                <hr/>
                <form action="/" method="post" id="formulaire_chat_websoket">
                    <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
                    <button id="envoi_message" type="submit">Envoyer</button>
                </form>
                <hr class="hrForm">
                <textarea class="input" id="zone_chat_websocket" placeholder="Once upon a time..." size="20" style="height:100px"></textarea>
                <form id="text-options1">
                    <label><input type="text1" class="filename" id="text-filename1" placeholder="Pilote_WS_LOGS" />.txt</label>
                    <button id="saveLogs_webSocket" type="submit" value="Save" />Save</button>
                </form>
            </div>
       

        </div>

        <div id="colDroiteUpControlArea2" class="floatRight tripleQuarterBox" style="width:960px">
            

        
            <div id="NavigationArea" class="insideFlex robot tripleQuarterBox shadowBlack floatRight" style="height:200px; width:600px;min-width:600px">
                    <strong> Localisation</strong>
                    <input type="radio" name="CartoSetting" value="show" id="CartoShow" checked onclick="setCarto('show')"> <label for="CartoShow">Show</label>
                    <input type="radio" name="CartoSetting" value="hide" id="CartoHide" onclick="setCarto('hide')"/> <label for="CartoHide">Hide</label>
                    &nbsp;&nbsp; || &nbsp;&nbsp;
                    <input type="radio" name="CartoChannel" value="websocket" id="CartoChannelWs" checked onclick="setCartoChannel('webSocket')"> <label for="CartoChannelWs">Websocket</label>
                    <input type="radio" name="CartoChannel" value="webRTC" id="CartoChannelWebRTC" onclick="setCartoChannel('webRTC')"/> <label for="CartoChannelWebRTC">WebRTC</label>

                    <hr/>
                    <canvas id="myCanvas" width="500" height="160" style=""></canvas>
            </div>







            <div id="WebRTC_Logs" class="insideFlex oneQuarterbox pilote shadowBlack device" style="height:200px">
                
                <!--<div id="dataChannelArea" class="insideFlex pilote shadowBlack floatLeft fourQuarterBox">-->
                    <strong> WebRTC dataChannel Log </strong>
                    <hr/>
                    <div id="formulaire_chat_webRTC" class="pseudoForm">
                        <input type="text" name="message" id="input_chat_WebRTC" disabled placeholder="Waiting open channel..." size="28" autofocus />
                        <button id="env_msg_WebRTC" disabled onclick="sendMessage()">Envoyer</button>
                    </div>
                    <hr class="hrForm">
                    <textarea class="input" id="zone_chat_WebRTC" placeholder="Once upon a time..." size="20" style="height:100px"></textarea>
                    <form id="text-options2">
                        <label><input type="text" class="filename" id="text-filename2" placeholder="Pilote_WebRTC_LOGS" />.txt</label>
                        <button id="saveLogs_webRTC" type="submit" value="Save" />Save</button>
                    </form>
            </div>
        </div>    
    
    </section>



    <section id="settingsArea" class="fullSizeContainerBox">
        
        <div id="colFullTopSettingsArea" class="insideFlex colorSettings shadowBlack floatLeft " style="width:1248px">
            <strong> Settings </strong>
            <hr/>
            <!--
            <span id="CameraSettings" class="">
                Cameras Resolutions:
                 <input type="radio" name="CamSetting" value="VLD" id="CamVeryLow" onclick="setCamDefinition('VLD')" /> <label for="CamVeryLow">Very Low (100x56)</label>
                <input type="radio" name="CamSetting" value="LD" id="CamLow" onclick="setCamDefinition('LD')" /> <label for="CamLow">Low (320x180)</label>
                <input type="radio" name="CamSetting" value="MD" id="CamMedium" onclick="setCamDefinition('MD')"/> <label for="CamMedium">Medium (640x360)</label>
                <input type="radio" name="CamSetting" value="HD" id="CamHight" onclick="setCamDefinition('HD')"/> <label for="CamHight">High (1280x720)</label>
            </span>
            <br/>
            -->

            <span id="robotVideoSetting" class="">
                IHM Robot - Local view: 
                <input type="radio" name="RlVidSetting" value="show" id="RlVshow" checked onclick="setLocalRobotView('show')"> <label for="RlVshow">Show</label>
                <input type="radio" name="RlVidSetting" value="hide" id="RlVhide" onclick="setLocalRobotView('hide')"/> <label for="RlVhide">Hide</label>
                &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                <input type="radio" name="RRVidSetting" value="show" id="RRVshow" checked onclick="setRemoteRobotView('show')"> <label for="RRVshow">Show</label>
                <input type="radio" name="RRVidSetting" value="hide" id="RRVhide" onclick="setRemoteRobotView('hide')"/> <label for="RRVhide">Hide</label>
                &nbsp;&nbsp; || &nbsp;&nbsp;
                <label for="robot_camdef_select">Camera Resolution &nbsp;&nbsp; </label>
                <select id="robot_camdef_select">
                    <option value="VLD">Very Low (100*52) 16/9</option>   
                    <option value="LD">Low (160*88) 16/9</option> 
                    <option value="MD">Medium (320*180) 16/9</option> 
                    <option value="HD" selected="selected">High (640*360) 16/9</option> 
                    <option value="FHD">Very Hight (640*480) 4/3</option>
                </select>
            </span>
            <br/>
            
            <span id="piloteVideoSetting" class="">
                IHM Pilote - Local view: 
                <input type="radio" name="PlVidSetting" value="show" id="PlVshow" checked onclick="setLocalPilotView('show')"> <label for="PlVshow">Show</label>
                <input type="radio" name="PlVidSetting" value="hide" id="PlVhide" onclick="setLocalPilotView('hide')"/> <label for="PlVhide">Hide</label>
                &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                <input type="radio" name="PRVidSetting" value="high" id="PRVhigh" onclick="setRemotePiloteView('high')" checked/> <label for="PRVhigh">Show</label>
                <input type="radio" name="PRVidSetting" value="hide" id="PRVhide" onclick="setRemotePiloteView('hide')"/> <label for="PRVhide">Hide</label>
                &nbsp;&nbsp; || &nbsp;&nbsp;
                    <label for="pilot_camdef_select">Camera Resolution &nbsp;&nbsp; </label>
                    <select id="pilot_camdef_select">
                    <option value="VLD">Very Low (100*52) 16/9</option>   
                    <option value="LD">Low (160*88) 16/9</option> 
                    <option value="MD">Medium (320*180) 16/9</option> 
                    <option value="HD" selected="selected">High (640*360) 16/9</option> 
                    <option value="FHD">Very Hight (640*480) 4/3</option>
                </select>
                </span>
            <hr/>
        </div>
    </section>


    <script>
        var type = "pilote-appelant";
        var proto = "1to1";
    </script>


    
    

    <script src="/socket.io/socket.io.js"></script>
    <script src='/js/lib/adapter.js'></script>
    <!--<script src="/js/lib/gamepad.js"></script>-->
    <script src="/js/lib/FileSaver.js"></script>
    <!-- <script src="/js/lib/timesync.js"></script> -->
    <!--<script src="https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"></script>-->
    <script src="/js/lib/autobahn.min.jgz"></script>
    
    <script src="/js/common_tools.js"></script>
    <script src="/js/common_settings.js"></script>    
    <script src='/js/module_commands.js'></script>
    

    <script src='/js/main_websocket.js'></script>
    <script src='/js/main_settings.js'></script>
    <script src="/js/module_timesync.js"></script>
    <script src='/js/main_1to1.js'></script>

    
    <script src='/js/module_komnav_pilote.js'></script>
    <!--<script src='/js/module_robustesse.js'></script>-->
    <script src='/js/module_settings.js'></script>
    <script src='/js/module_battery.js'></script>
    <script src='/js/module_fake_robubox.js'></script>
    <script src='/js/module_carto.js'></script>
   
    
    <script src='/js/module_managevisitors.js'></script>
    
   
    <script src='/js/module_gamepad2.js'></script>
    <!--<script src='/js/module_navigation.js'></script>-->
    <script src="/js/module_logs.js"></script>
    
    

    <script>                    
            // On récupère depuis nodejs le nom de la machine serveur
            // en passant par de l'AJAX plutôt que par websocket....
            hostName = "???";    
            $.get( "/getvar", function( data ) {
              hostName = data.hostName;
              //if (hostName != "???" ) $('#zone_info_server').replaceWith(settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")");
              infoServerTxt = settings.appBranch() + ' - ' + settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")";
              if (hostName != "???" ) $('#zone_info_server').replaceWith(infoServerTxt);
            });
    </script> 

</body>

</html>
