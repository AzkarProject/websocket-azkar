<html>

<head>
</head>

<head>
    <meta charset="utf-8" />
    <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
    <meta name='description' content='WebRTC benchmarks base for AZKAR project' />
    <!-- viewport sert a controler la mise en page sur les appareils mobiles -->
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
    <link rel="stylesheet" href="/css/style.css" />
    <script src='/js/lib/jquery-1.11.3.min.js'></script>
    <link rel="import" href="/web_kom-remote/kom-remote.html">
    <title>AZKAR 1to1</title>
</head>



<body class="ihmPilote">
    
    <strong><span id="zone_info_server">WebRTC AZKAR</span></strong>
    <hr/>
    
    <section id="controlArea" class="fullSizeContainerBox">

        <div id="colGaucheUpControlArea" class="floatLeft oneQuarterContainerBox">
            
            <div id="robotDevices" class="insideFlex oneQuarterbox robot shadowBlack device">
                <strong>Robot Devices</strong>
                <hr/>
                <div class="select">
                    <label for="remote_audioSource">Audio: </label>
                    <select id="remote_audioSource"></select>
                </div>
                <div class="select">
                    <label for="remote_videoSource">Video: </label>
                    <select id="remote_videoSource"></select>
                </div>
                <hr/>
                <button id="remote_ButtonDevices" onclick="remoteManageDevices()">Sélectionner</button>
            </div>


            <div id="piloteDevices" class="insideFlex oneQuarterbox pilote shadowBlack device">
                <strong> Pilote Devices</strong>
                <hr/>
                <div class = "videosContainer">
                    <video id='1to1_localVideo' autoplay muted controls="controls"></video>
                </div>
                <hr/>
                <div class="select">
                    <label for="local_audioSource">Audio: </label>
                    <select id="local_audioSource"></select>
                </div>
                <div class="select">
                    <label for="local_videoSource">Video: </label>
                    <select id="local_videoSource"></select>
                </div>
                <!--<hr/>
                <button class="shadowBlack" id="local_ButtonDevices" onclick="localManageDevices()">Ouvrir la connexion</button>-->
            </div>


            <div id="1to1_master_connection" class="insideFlex oneQuarterbox robot shadowBlack device">

                <span id="openConnection">
                    <button class="shadowBlack" id="local_ButtonDevices" onclick="localManageDevices()">
                        Ouvrir la connexion
                    </button>
                <span id="closeConnection"></span>

            </div>
        </div>

        <div id="colDroiteUpControlArea" class="floatRight tripleQuarterBox" style="height:440px;width:960px">
            
            <div id="remoteVideoArea" class="insideFlex robot tripleQuarterBox shadowBlack floatRight" style="height:415px; width:600px;min-width:600px">
                <strong> Robot Camera View</strong>
                <hr/>
                <div class = "videosContainer" style="height:300px; width:300px;min-width:300px">
                    <video id='1to1_remoteVideo' class="" autoplay muted controls="controls" style="height:380px; width:600px;min-width:600px"></video>
                </div>
            </div>
        

            <div id="robotCommands" class="insideFlex oneQuarterbox robot shadowBlack device" style="height:333px">
                <strong>Robot controls</strong> <span id="connect-notice"></span>
                <hr/>

                
                <span id="systemSetting" class="">
                System: 
                    <input type="radio" name="controlSystem" value="Robubox" id="Robubox" onclick="setNavSystem('Robubox')" checked /> <label for="Robubox">Robubox</label>
                    <input type="radio" name="controlSystem" value="KomNAV" id="KomNAV" onclick="setNavSystem('KomNAV')"/> <label for="KomNAV">KomNAV</label>
                </span>
                <br/>
                <span id="dataChannelSetting" class="">
                Channel: 
                    <input type="radio" name="controlChannel" value="webSocket" id="webSocket" onclick="setNavChannel('webSocket')" checked /> <label for="webSocket">webSocket</label>
                    <input type="radio" name="controlChannel" value="webRTC" id="webRTC" onclick="setNavChannel('webRTC')"/> <label for="webRTC">webRTC</label>
                    
                </span>
                <hr/>

                <div id="step-commands">                   
                    <kom-remote class="kom-remote"></kom-remote>
                </div>

                <div id="drive-commands" style="display:none; overflow: scroll; height:150px">
                    <ul id="gamepads"></ul>
                </div>
            
            </div> <!-- id="robotCommands" -->


            <!--<div id="robotInfos" class="insideFlex robot oneThirdBox shadowBlack device floatLeft" style="height:60px;width:316px;min-width:316px">-->
            <div id="robotInfos" class="insideFlex robot oneQuarterbox shadowBlack device floatLeft" style="height:60px">
                <strong> Robot Informations</strong>
                <hr/>
                <div class="jauge"style="width:300px">
                    <label for="battery_level">Battery Level:</label>
                    <progress id="battery_level" class="floatRight" max="100" style="width:100px"></progress>
                </div>
            </div>
        </div>

   
    </section>

   

    <section id="controlArea2" class="fullSizeContainerBox">

        <div id="colGaucheUpControlArea" class="floatLeft oneQuarterContainerBox">
            
            <div id="websocketChat" class="insideFlex pilote oneQuarterbox shadowBlack floatLeft" style="height:200px">
                <strong> Websocket Messages & Chat</strong>
                <hr/>
                <form action="/" method="post" id="formulaire_chat_websoket">
                    <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
                    <button id="envoi_message" type="submit">Envoyer</button>
                </form>
                <hr class="hrForm">
                <textarea class="input" id="zone_chat_websocket" placeholder="Once upon a time..." size="20" style="height:100px"></textarea>
                <form id="text-options1">
                    <label><input type="text1" class="filename" id="text-filename1" placeholder="Pilote_WS_LOGS" />.txt</label>
                    <button id="saveLogs_webSocket" type="submit" value="Save" />Save</button>
                </form>
            </div>
       

        </div>

        <div id="colDroiteUpControlArea2" class="floatRight tripleQuarterBox" style="width:960px">
            

        
            <div id="NavigationArea" class="insideFlex robot tripleQuarterBox shadowBlack floatRight" style="height:200px; width:600px;min-width:600px">
                    <strong> Navigation</strong>
                    <hr/>
                    <canvas id="myCanvas" width="500" height="180" style=""></canvas>
            </div>







            <div id="WebRTC_Logs" class="insideFlex oneQuarterbox pilote shadowBlack device" style="height:200px">
                
                <!--<div id="dataChannelArea" class="insideFlex pilote shadowBlack floatLeft fourQuarterBox">-->
                    <strong> WebRTC dataChannel Log </strong>
                    <hr/>
                    <div id="formulaire_chat_webRTC" class="pseudoForm">
                        <input type="text" name="message" id="input_chat_WebRTC" disabled placeholder="Waiting open channel..." size="28" autofocus />
                        <button id="env_msg_WebRTC" disabled onclick="sendMessage()">Envoyer</button>
                    </div>
                    <hr class="hrForm">
                    <textarea class="input" id="zone_chat_WebRTC" placeholder="Once upon a time..." size="20" style="height:100px"></textarea>
                    <form id="text-options2">
                        <label><input type="text" class="filename" id="text-filename2" placeholder="Pilote_WebRTC_LOGS" />.txt</label>
                        <button id="saveLogs_webRTC" type="submit" value="Save" />Save</button>
                    </form>
            </div>
        </div>    
    
    </section>



    <section id="settingsArea" class="fullSizeContainerBox">
        
        <div id="colFullTopSettingsArea" class="insideFlex colorSettings shadowBlack floatLeft " style="width:1248px">
            <strong> Settings </strong>
            <hr/>
            
            

            <span id="robotVideoSetting" class="">
                    IHM Robot - Local view: 
                    <input type="radio" name="RlVidSetting" value="show" id="RlVshow" checked onclick="setLocalRobotView('show')"> <label for="RlVshow">Show</label>
                    <input type="radio" name="RlVidSetting" value="hide" id="RlVhide" onclick="setLocalRobotView('hide')"/> <label for="RlVhide">Hide</label>
                    &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                    <input type="radio" name="RRVidSetting" value="show" id="RRVshow" checked onclick="setRemoteRobotView('show')"> <label for="RRVshow">Show</label>
                    <input type="radio" name="RRVidSetting" value="hide" id="RRVhide" onclick="setRemoteRobotView('hide')"/> <label for="RRVhide">Hide</label>
                </span>
            <br/>
            <span id="piloteVideoSetting" class="">
                    IHM Pilote - Local view: 
                    <input type="radio" name="PlVidSetting" value="show" id="PlVshow" checked onclick="setLocalPilotView('show')"> <label for="PlVshow">Show</label>
                    <input type="radio" name="PlVidSetting" value="hide" id="PlVhide" onclick="setLocalPilotView('hide')"/> <label for="PlVhide">Hide</label>
                    &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                    <input type="radio" name="PRVidSetting" value="high" id="PRVhigh" onclick="setRemotePiloteView('high')" checked/> <label for="PRVhigh">High res</label>
                    <input type="radio" name="PRVidSetting" value="medium" id="PRVmedium" onclick="setRemotePiloteView('medium')" /> <label for="PRVmedium">Medium res</label>
                    <input type="radio" name="PRVidSetting" value="low" id="PRVlow" onclick="setRemotePiloteView('low')"/> <label for="PRVlow">Low res</label>
                    <input type="radio" name="PRVidSetting" value="hide" id="PRVhide" onclick="setRemotePiloteView('hide')"/> <label for="PRVhide">Hide</label>
                </span>
            <hr/>
        </div>
    </section>


    <script>
        var type = "pilote-appelant";
        var proto = "1to1";
    </script>


    
    

    <script src="/socket.io/socket.io.js"></script>
    <script src='/js/lib/adapter.js'></script>
    <script src="/js/lib/gamepad.js"></script>
    <script src="/js/lib/FileSaver.js"></script>
    <!--<script src="https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"></script>-->
    <script src="/js/lib/autobahn.min.jgz"></script>
    
    <script src="/js/common_tools.js"></script>
    <script src="/js/common_settings.js"></script>    
    <script src='/js/module_commands.js'></script>
    

    <script src='/js/main_websocket.js'></script>
    <script src='/js/main_settings.js'></script>
    <script src='/js/main_1to1.js'></script>

    
    <script src='/js/module_komnav_pilote.js'></script>
    <script src='/js/module_settings.js'></script>
    <script src='/js/module_battery.js'></script>
    <script src='/js/module_fake_robubox.js'></script>
    <script src='/js/module_carto.js'></script>
   
    
    <script src='/js/module_managevisitors.js'></script>
    
   
    <script src='/js/module_gamepad.js'></script>
    <script src='/js/module_navigation.js'></script>
    <script src="/js/module_logs.js"></script>
    
    

    <script>                    
            // On récupère depuis nodejs le nom de la machine serveur
            // en passant par de l'AJAX plutôt que par websocket....
            hostName = "???";    
            $.get( "/getvar", function( data ) {
              hostName = data.hostName;
              //if (hostName != "???" ) $('#zone_info_server').replaceWith(settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")");
              infoServerTxt = settings.appBranch() + ' - ' + settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")";
              if (hostName != "???" ) $('#zone_info_server').replaceWith(infoServerTxt);
            



            });
    </script> 

</body>

</html>
