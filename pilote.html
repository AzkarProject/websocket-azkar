<html>

<head>
</head>

<head>
    <meta charset="utf-8" />
    <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
    <meta name='description' content='WebRTC benchmarks base for AZKAR project' />
    <!-- viewport sert a controler la mise en page sur les appareils mobiles -->
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
    <link rel="stylesheet" href="/css/style.css" />
    <title>WebRTC AZKAR</title>
</head>

<body class="ihmPilote">
    
    <strong><span id="zone_info_server">WebRTC AZKAR</span></strong>
    <hr/>
    

    
    <section id="controlArea" class="fullSizeContainerBox">

        <div id="colGaucheUpControlArea" class="floatLeft oneQuarterContainerBox">
            
            <div id="robotDevices" class="insideFlex oneQuarterbox robot shadowBlack device">
                <strong>Robot Devices</strong>
                <hr/>
                <div class="select">
                    <label for="remote_audioSource">Audio: </label>
                    <select id="remote_audioSource"></select>
                </div>
                <div class="select">
                    <label for="remote_videoSource">Video: </label>
                    <select id="remote_videoSource"></select>
                </div>
                <hr/>
                <button id="remote_ButtonDevices" onclick="remoteManageDevices()">Sélectionner</button>
            </div>

            <div id="piloteDevices" class="insideFlex oneQuarterbox pilote shadowBlack device">
                <strong> Pilote Devices</strong>
                <hr/>
                <div class = "videosContainer">
                    <video id='1to1_localVideo' autoplay muted controls="controls"></video>
                </div>
                <hr/>
                <div class="select">
                    <label for="local_audioSource">Audio: </label>
                    <select id="local_audioSource"></select>
                </div>
                <div class="select">
                    <label for="local_videoSource">Video: </label>
                    <select id="local_videoSource"></select>
                </div>
                <hr/>
                <button class="shadowBlack" id="local_ButtonDevices" onclick="localManageDevices()">Ouvrir la connexion</button>
            </div>


        </div>

        <div id="colDroiteUpControlArea" class="floatRight tripleQuarterBox" style="height:440px;width:960px">
            
            <div id="remoteVideoArea" class="insideFlex robot tripleQuarterBox shadowBlack floatRight" style="height:415px; width:600px;min-width:600px">
                <strong> Robot Camera View</strong>
                <hr/>
                <div class = "videosContainer" style="height:300px; width:300px;min-width:300px">
                    <video id='1to1_remoteVideo' class="" autoplay muted controls="controls" style="height:380px; width:600px;min-width:600px"></video>
                </div>
            </div>
        

            <div id="robotCommands" class="insideFlex oneQuarterbox robot shadowBlack device" style="height:333px;width:316px">
                <strong>Robot controls</strong> <span id="connect-notice"></span>
                <hr/>

                <div id="step-commands">
                    Distance :
                    <input type="text" name="distance" id="stepDistance" size="4" value="0.1" /> mètres 
                    <br/>  
                    Rotation :
                    <input type="text" name="rotation" id="stepRotation" size="4" value="22.5" /> degrés
                    
                    <div id="divBtUp">
                        <button id="btnUp" class="btnCommandsPad" onclick="cmdUp()">&uarr;</button>
                    </div>
                    
                    <div id="divBtLeft">
                        <button id="btnLeft" class="btnCommandsPad" onclick="cmdLeft()">&larr;</button>
                    </div>
                   
                    <div id="divBtRight">
                        <button id="btnRight" class="btnCommandsPad" onclick="cmdRight()">&rarr;</button>
                    </div>
                    
                    <div id="divBtDown">
                        <button id="btnDown" class="btnCommandsPad" onclick="cmdDown()">&darr;</button>
                    </div>
                    
                    <div id="divBtSpeed">
                        <button id="btnIncrease" class="btnCommandsPad" onclick="cmdSpeed(-0.1)">-</button>
                        <progress id="jaugeSpeedSetting" value="0.1" max="1"></progress>
                        <button id="btnDecrease" class="btnCommandsPad" onclick="cmdSpeed(0.1)">+</button>
                        <br/> Speed Setting: <span id="speedSetting">m.s</span>
                    </div>
                </div>












<!--                 <div id="step-commands">
                    <div id="divBtUp">
                        <button id="btnUp" class="btnCommandsPad" onclick="cmdUp()">&uarr;</button>
                    </div>
                    <div id="divBtLeft">
                        <button id="btnLeft" class="btnCommandsPad" onclick="cmdLeft()">&larr;</button>
                    </div>
                    <div id="divBtRight">
                        <button id="btnRight" class="btnCommandsPad" onclick="cmdRight()">&rarr;</button>
                    </div>
                    <div id="divBtDown">
                        <button id="btnDown" class="btnCommandsPad" onclick="cmdDown()">&darr;</button>
                    </div>
                    <div id="divBtSpeed">

                        <button id="btnIncrease" class="btnCommandsPad" onclick="cmdSpeed(-0.1)">-</button>
                        <progress id="jaugeSpeedSetting" value="0.5" max="1"></progress>
                        <button id="btnDecrease" class="btnCommandsPad" onclick="cmdSpeed(0.1)">+</button>
                        <br/> Speed Setting: <span id="speedSetting">m.s</span>
                        <script>
                        function jaugeSpeedSetting() {
                            var ava = document.getElementById("jaugeSpeedSetting");
                            var prc = document.getElementById("speedSetting");
                            prc.innerHTML = ava.value + " m.s";
                        }

                        jaugeSpeedSetting();

                        function cmdSpeed(val) {
                            var ava = document.getElementById("jaugeSpeedSetting");
                            if ((ava.value + val) <= ava.max && (ava.value + val) >= 0) {
                                ava.value += val;
                            }
                            jaugeSpeedSetting();
                        }
                        </script>
                    </div>
                </div> -->
               

                <div id="drive-commands" style="display:none; overflow: scroll; height:150px">
                    <ul id="gamepads"></ul>
                </div>
            </div> <!-- id="robotCommands" -->


            <div id="robotInfos" class="insideFlex robot oneThirdBox shadowBlack device floatLeft" style="height:60px;width:316px;min-width:316px">
                <strong> Robot Informations</strong>
                <hr/>
                <div class="jauge"style="width:300px">
                    <label for="battery_level">Battery Level:</label>
                    <progress id="battery_level" class="floatRight" max="100" style="width:100px"></progress>
                </div>
            </div>

        </div>
        
        <div id="colDroiteMiddleControlArea" class="floatLeft oneThirdContainerBox">
            

            
            <div id="websocketChat" class="insideFlex pilote oneThirdBox shadowBlack floatLeft" style="height:200px">
                <strong> Websocket Messages & Chat</strong>
                <hr/>
                <form action="/" method="post" id="formulaire_chat_websoket">
                    <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
                    <button id="envoi_message" type="submit">Envoyer</button>
                </form>
                <hr class="hrForm">
                <textarea class="input" id="zone_chat_websocket" placeholder="Once upon a time..." style="height:100px"></textarea>
                <form id="text-options1">
                    <label>Filename:
                        <input type="text1" class="filename" id="text-filename1" placeholder="Pilote_WS_LOGS" />.txt</label>
                    <button id="saveLogs_webSocket" type="submit" value="Save" />Save</button>
                </form>
            </div>


                    <div id="colDroiteBottomVisitorsArea" class="floatLeft oneThirdContainerBox">
            <div id="manageVisitors" class="insideFlex visiteur oneThirdBox shadowBlack floatLeft" style="height:180px">
                <strong> Manage visitors </strong>
                <hr/>
                <div id="listConnected">Nobody's here...</div>

            </div>
        </div>






        </div>      

        <div id="colGaucheUpVisitorsArea" class="floatRight doubleThirdContainerBox">
            <div id="remoteVisitorsCameras" class="insideFlex visiteur DoubleThirdBox shadowBlack floatRight">
                <strong> Visitors Views</strong>
                <hr/>
                <div class = "videosContainer">
                    <div id="videos"></div>
                        <button id="removeVideoButton">Supprimer une vidéo</video>
                    </div>
                

                </div>
            </div>
        </div>


        
        <div id="colFullBottomControlArea" class="floatRight fullSizeContainerBox">
            <div id="dataChannelArea" class="insideFlex pilote shadowBlack floatLeft fourQuarterBox">
                <strong> WebRTC dataChannel Log </strong>
                <hr/>
                <div id="formulaire_chat_webRTC" class="pseudoForm">
                    <input type="text" name="message" id="input_chat_WebRTC" disabled placeholder="Waiting open channel..." size="28" autofocus />
                    <button id="env_msg_WebRTC" disabled onclick="sendMessage()">Envoyer</button>
                </div>
                <hr class="hrForm">
                <textarea class="input" id="zone_chat_WebRTC" placeholder="Once upon a time..."></textarea>
                <form id="text-options2">
                    <label>Filename:
                        <input type="text" class="filename" id="text-filename2" placeholder="Pilote_WebRTC_LOGS" />.txt</label>
                    <button id="saveLogs_webRTC" type="submit" value="Save" />Save</button>
                </form>
            </div>
        </div>
   
    </section>

    <section id="Visitors_Area" class="fullSizeContainerBox">

        <div id="colDroiteUpVisitorsArea" class="floatLeft oneThirdContainerBox">

            <div id="OneToNChat" class="insideFlex visiteur oneThirdBox shadowBlack floatLeft">
                <strong> 1toN Messages & Chat</strong>
                <hr/>
                <form action="/" method="post" id="formulaire_chat_1toN">
                    <input type="text3" name="message3" id="message3" placeholder="Votre message..." size="28" autofocus />
                    <button id="envoi_message3" type="submit">Envoyer</button>
                </form>
                <hr class="hrForm">
                <textarea class="input" id="zone_chat_1toN" placeholder="Once upon a time..."></textarea>
                <form id="text-options3">
                    <label>Filename:
                        <input type="text3" class="filename" id="text-filename3" placeholder="1toN_chat" />.txt</label>
                    <button id="saveLogs_1toN" type="submit" value="Save" />Save</button>
                </form>
            </div>        
        </div>


    
       



        <div id="colGaucheBottomVisitorsArea" class="floatRight doubleThirdContainerBox">
            <div id="manageFiles" class="insideFlex visiteur DoubleThirdBox shadowBlack floatRight">
                <strong> Manage Files </strong>
                <hr/>
                TODO... upload, delete files, etc...
            </div>       
        </div>

    </section>

    <section id="settingsArea" class="fullSizeContainerBox">
        
        <div id="colFullTopSettingsArea" class="insideFlex colorSettings shadowBlack floatLeft fourQuarterBox">
            <strong> Settings </strong>
            <hr/>
            <span id="dataChannelSetting" class="">
                    Navigation channel: 
                    <input type="radio" name="controlChannel" value="webSocket" id="webSocket" onclick="setNavChannel('webSocket')" checked /> <label for="webSocket">webSocket</label>
                    <input type="radio" name="controlChannel" value="webRTC" id="webRTC" onclick="setNavChannel('webRTC')"/> <label for="webRTC">webRTC</label>
                    
                </span>
            <br/>
            <span id="streamSetting" class="">
                    Video Stream Settings - Open & Send Pilote Stream to Robot:
                    <input type="radio" name="streamVidToRobot" value="open" id="streamOpen" onclick="setPilotStreamToRobot('open')" checked /> <label for="streamOpen">Yes</label>
                    <input type="radio" name="streamVidToRobot" value="close" id="streamClose" onclick="setPilotStreamToRobot('close')" /> <label for="streamClose">No</label>
                </span>
            <br/>
            <span id="robotVideoSetting" class="">
                    IHM Robot - Local view: 
                    <input type="radio" name="RlVidSetting" value="show" id="RlVshow" checked onclick="setLocalRobotView('show')"> <label for="RlVshow">Show</label>
                    <input type="radio" name="RlVidSetting" value="hide" id="RlVhide" onclick="setLocalRobotView('hide')"/> <label for="RlVhide">Hide</label>
                    &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                    <input type="radio" name="RRVidSetting" value="show" id="RRVshow" checked onclick="setRemoteRobotView('show')"> <label for="RRVshow">Show</label>
                    <input type="radio" name="RRVidSetting" value="hide" id="RRVhide" onclick="setRemoteRobotView('hide')"/> <label for="RRVhide">Hide</label>
                </span>
            <br/>
            <span id="piloteVideoSetting" class="">
                    IHM Pilote - Local view: 
                    <input type="radio" name="PlVidSetting" value="show" id="PlVshow" checked onclick="setLocalPilotView('show')"> <label for="PlVshow">Show</label>
                    <input type="radio" name="PlVidSetting" value="hide" id="PlVhide" onclick="setLocalPilotView('hide')"/> <label for="PlVhide">Hide</label>
                    &nbsp;&nbsp; || &nbsp;&nbsp; Remote view: 
                    <input type="radio" name="PRVidSetting" value="high" id="PRVhigh" onclick="setRemotePiloteView('high')" checked/> <label for="PRVhigh">High res</label>
                    <input type="radio" name="PRVidSetting" value="medium" id="PRVmedium" onclick="setRemotePiloteView('medium')" /> <label for="PRVmedium">Medium res</label>
                    <input type="radio" name="PRVidSetting" value="low" id="PRVlow" onclick="setRemotePiloteView('low')"/> <label for="PRVlow">Low res</label>
                    <input type="radio" name="PRVidSetting" value="hide" id="PRVhide" onclick="setRemotePiloteView('hide')"/> <label for="PRVhide">Hide</label>
                </span>
            <hr/>
        </div>

    </section>
    
    <section id="temporaire">
    

<!--         <div id="colGaucheMiddleControlArea" class="floatRight doubleThirdContainerBox">
            <div id="navigation" class="insideFlex robot DoubleThirdBox shadowBlack floatRight">
                <strong> Navigation</strong>
                <hr/>
                <canvas id="mapviewer_canvas" width="620" height="350" class="floatright">
                    Votre navigateur ne supporte pas les canvas.
                </canvas>
                <div id="points_interets_area" class="floatLeft">
                    <form action="/" method="post" id="formulaire_points_interets">
                        <p>
                            <input type="radio" name="goto" value="x,y" id="salon" />
                            <label for="salon">Salon</label>
                            <br />
                            <input type="radio" name="goto" value="x,y" id="cuisine" />
                            <label for="cuisine">Cuisine</label>
                            <br />
                            <input type="radio" name="goto" value="x,y" id="chambre" />
                            <label for="chambre">Chambre</label>
                            <br />
                            <input type="radio" name="goto" value="x,y" id="sdb" />
                            <label for="sdb">Salle de bain</label>
                            <br />
                            <input type="radio" name="goto" value="x,y" id="entree" />
                            <label for="entree">Entrée</label>
                            <br />
                            <button id="envoi_goto" type="submit">Go</button>
                        </p>
                    </form>
                </div>
            </div>
        </div> -->

<!--         <div id="colGaucheUpVisitorsArea" class="floatRight doubleThirdContainerBox">
            <div id="remoteVisitorsCameras" class="insideFlex visiteur DoubleThirdBox shadowBlack floatRight">
                <strong> Visitors Views</strong>
                <hr/>
                <div class = "videosContainer">
                    <video id='1toN_remoteVideos' class="" autoplay muted controls="controls"></video>
                </div>
            </div>
        </div> -->

    </section>




    <script>
    var type = "pilote-appelant";
    var otherType = "robot-appelé";
    </script>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src='/js/lib/jquery-1.10.1.min.js'></script>
    <script src='/js/lib/adapter.js'></script>
    <script src="/js/lib/gamepad.js"></script>
    <script src="/js/lib/FileSaver.js"></script>
    
    <script src="/js/common_tools.js"></script>
    <script src="/js/common_settings.js"></script>    
    
    <script src='/js/main_websocket.js'></script>
    <script src='/js/main_settings.js'></script>
    <script src='/js/main_1to1.js'></script>
    <script src='/js/main_1toN_Visiteur.js'></script>
    
    <script src='/js/module_settings.js'></script>
    <script src='/js/module_infos.js'></script>
    <script src='/js/module_managevisitors.js'></script>
    <script src='/js/module_multiview.js'></script>
    <script src='/js/module_commands.js'></script>
    <script src='/js/module_navigation.js'></script>
    <script src="/js/module_logs.js"></script>
    
    <script>                    
            // On récupère depuis nodejs le nom de la machine serveur
            // en passant par de l'AJAX plutôt que par websocket....
            hostName = "???";    
            $.get( "/getvar", function( data ) {
              hostName = data.hostName;
              //if (hostName != "???" ) $('#zone_info_server').replaceWith(settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")");
              infoServerTxt = settings.appBranch() + ' - ' + settings.appName() + " V " + settings.appVersion()+ " ("+hostName+")";
              if (hostName != "???" ) $('#zone_info_server').replaceWith(infoServerTxt);
            



            });
    </script> 

</body>

</html>
