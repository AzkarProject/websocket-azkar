<html>
<head>

	
</head>

    <head>
    <meta charset="utf-8" />
    <meta name='keywords' content='WebRTC, HTML5, JavaScript' />
    <meta name='description' content='WebRTC benchmarks base for AZKAR project' />
    <!-- viewport sert a controler la mise en page sur les appareils mobiles -->
    <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>
    <link rel="stylesheet" href="/css/style.css" />
    <script src='/js/lib/jquery-1.11.3.min.js'></script>
    <link rel="import" href="/web_kom-remote/kom-remote.html">
	<title>1to1-Robot</title>
    </head>


<body class="ihmRobot">

    <strong><span id="zone_info_server">WebRTC AZKAR</span></strong>
    <hr/>


	<section id="bloc_1to1_messages" class="" style="float:left;width:1300px">
				
			<div id="websocketChat" class="insideFlex robot shadowBlack floatLeft doubleQuarterBox">  
				
			    <form action="/" method="post" id="formulaire_chat_websoket" style="text-align:center" >
			        <strong>Websocket Chat & Logs&nbsp;</strong>
		            <input type="text" name="message" id="message" placeholder="Votre message..." size="28" autofocus />
		            <button id="env_msg_ws" type="submit" >Envoyer</button>
		        </form>
		        <hr class="hrForm">
			 	<textarea class="input" style="width:100%" id="zone_chat_websocket" readonly="readonly" placeholder="Once upon a time..."></textarea>
				<hr class="hrForm">
				<form id="text-options1" style="text-align:center">
            		<label>Filename: <input type="text1" class="filename" id="text-filename1" placeholder="Robot_WS_LOGS"/>.txt</label>
            		<button id="saveLogs_webSocket" type="submit" value="Save"/>Save</button>
        		</form>
			</div>

      		<div id="dataChannelArea" class="insideFlex robot shadowBlack floatLeft doubleQuarterBox"> 
			        
			   <div id="formulaire_chat_webRTC" class="pseudoForm" style="text-align:center">
			        <strong>WebRTC Chat & Logs&nbsp;</strong>
		            <input type="text" name="message" id="input_chat_WebRTC" disabled placeholder="Waiting open channel..." size="28" autofocus />
		            <button id="env_msg_WebRTC" disabled onclick="sendMessage()">Envoyer</button>
			   </div>
			    <hr class="hrForm">
				<textarea class="input" id="zone_chat_WebRTC" readonly="readonly" style="width:100%" placeholder="Once upon a time..."></textarea>
				<hr class="hrForm">
				<form id="text-options2" style="text-align:center">
	            	<label>Filename: <input type="text" class="filename" id="text-filename2" placeholder="Robot_webRTC_LOGS"/>.txt</label>
	            	<button id="saveLogs_webRTC" type="submit" value="Save"/>Save</button>
	        	</form>
	      		

	      	</div>
	</section>		
				
	<section id="bloc_1toN" class="" style="float:left">
			

			<div  class="floatLeft doubleQuarterContainerBox">
				<div id="remoteCanvasArea" class="insideFlex robot shadowBlack">
		            <strong> Navigation</strong>
		            <hr/>
					<canvas id="myCanvas" width="500" height="140" style=""></canvas>
	        	</div>
        	</div>

			


			<div  class="floatLeft oneQuarterContainerBox">
				<div id="piloteCam" class="insideFlex pilote shadowBlack">
				    <strong> Pilot Camera</strong>
				    <hr/>
				    <div class = "videosContainer">
				    	<video id='1to1_remoteVideo' class="" autoplay muted controls="controls"></video>
				    </div>
		  	 	</div>
			</div>
		

			<div  class="floatLeft oneQuarterContainerBox">
				<div id="robotCam" class="insideFlex robot shadowBlack">
				    <strong> Robot Camera</strong>
				    <hr/>
				    <div class = "videosContainer">
                		<video id='1to1_localVideo' autoplay muted controls="controls"></video>
                	</div>
		  	 	</div>
			</div>
	</section>

	<section id="bloc_1to1_commands" class="" style="float:left;width:1300px">
		

		<div  class="floatLeft oneQuarterContainerBox">
					<div id="Command_PAD" class="insideFlex robot shadowBlack">
						<kom-remote class="kom-remote"></kom-remote>
		  	 	</div>
			</div>

			
			<div class="floatLeft oneQuarterContainerBox">
									
				<div class="jauge insideFlex robot shadowBlack">
	           		<label for="battery_level">Battery Level:</label>
	            	<progress id="battery_level" class="floatRight" max="100"></progress>
	        	</div>
	      	
	      	</div>

	      	<div class="floatLeft oneQuarterContainerBox">
			
				<div id="selectionMicros" class="insideFlex robot shadowBlack"> 
				  	<span id="messageDevicesStateMicro"> Micros disponibles</span>
					<hr/>
					<div class="select">
						<select id="local_audioSource"></select>
					</div>
				</div>	
			</div>

			<div class="floatLeft oneQuarterContainerBox">
			
				<div id="selectionCams" class="insideFlex robot shadowBlack"> 
				  	<span id="messageDevicesStateCams"> Caméras disponibles</span>
					<hr/>
					<div class="select">
					   	<select id="local_videoSource"></select>
					</div>
				</div>	
			</div>
	</section>


	<section id="TopNotification">
                       
            <div id='infoMessage' class="info message">
            </div>

            <div id='errorMessage' class="error message">
            </div>

            <div id='warningMessage' class="warning message">
            </div>

            <div id='sucessMessage' class="success message">
            </div>

            <div id='standardMessage' class="standard message">
            </div>

    </section>
		

       	<script>	  	 
		var type = "robot-appelé";
		</script>


        <script src="/socket.io/socket.io.js"></script>
        <script src='/js/lib/adapter.js'></script>
		<script src="/js/lib/FileSaver.js"></script>
    	<script src="/js/lib/autobahn.min.jgz"></script>
        
		<script src="/js/common_tools.js"></script>
		<script src="/js/common_models.js"></script>
        <script src="/js/settings/common_app_settings.js"></script>
        <script src="/js/cnrs/common_app_cnrs.js"></script>  

	    <script src='/js/1to1_01_websocket.js'></script>
	    
		<script src='/js/module_ihm.js'></script>
		<script src='/js/module_fake_robubox.js'></script>
        <script src='/js/module_navigation_interface.js'></script>
        <script src='/js/module_notifications.js'></script>
        <script src='/js/module_komcom.js'></script>
		<script src='/js/module_komremote.js'></script>
		<script src='/js/module_carto.js'></script>
		<script src='/js/module_userconnection.js'></script>
		<script src="/js/module_logs.js"></script>

	    <script src='/js/1to1_02_pre_signaling.js'></script>
	    <script src='/js/1to1_03_signaling.js'></script>
	    <script src='/js/1to1_04_post_signaling.js'></script>





		<script>                    
	      // On récupère depuis nodejs le nom de la machine serveur
	      // en passant par de l'AJAX plutôt que par websocket....
	      $.get( "/getvar", function( data ) {
	        hostName = data.hostName;
	        infoServerTxt = "<i>"+appSettings.appName()+": ";
	        infoServerTxt += appSettings.appBranch()+" - ";
	        infoServerTxt += " Version " + appSettings.appVersion();
	        infoServerTxt += " (Serveur: "+hostName+") </i>";
	        var infoCredit = " <br/> " + appSettings.appCredit();
	        if (hostName != "???" ) $('#zone_info_server').replaceWith(infoServerTxt+infoCredit);
	      });

    	
			// On lance l'utilitaire de récupération de la batterie
			komcom.getBattery();
		</script>

</body>
</html>